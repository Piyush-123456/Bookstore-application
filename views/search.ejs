<%- include("partials/header") %>
<%- include("partials/nav") %>

<div class="container mt-5">
  <h1 class="text-center mb-4" style="font-family: 'Georgia', serif;">Search for a Book</h1>
  <form action="/search" method="GET" class="mb-4">
    <div class="input-group">
      <input type="text" name="name" class="form-control" placeholder="Enter book name" required>
      <button class="btn btn-primary" type="submit">Search</button>
    </div>
  </form>

  <% if (books && books.length > 0) { %>
    <h2 class="text-center mb-4" style="font-family: 'Georgia', serif;">Search Results:</h2>
    <div class="row">
      <% books.forEach(book => { %>
        <div class="col-md-4 mb-3">
          <div class="card h-100 shadow-sm">
            <img src="/images/<%= book.posterurl %>" class="card-img-top" alt="<%= book.name %>" style="height: 250px; object-fit: cover;">
            <div class="card-body">
              <h5 class="card-title" style="font-family: 'Georgia', serif;"><%= book.name %></h5>
              <p class="card-text"><strong>Author:</strong> <%= book.authorname %></p>
              <p class="card-text"><strong>Price:</strong> $<%= book.price %></p>
              <p class="card-text"><%= book.description %></p>
            </div>
            <div class="card-footer text-center">
              <button class="btn btn-primary">Add to Cart</button>
            </div>
          </div>
        </div>
      <% }); %>
    </div>
  <% } else if (books) { %>
    <div class="text-center">
      <img src="https://via.placeholder.com/150" alt="No Results" class="mb-4">
      <p class="lead">No books found matching your search criteria.</p>
    </div>
  <% } %>
</div>

<%- include("partials/footer") %>
